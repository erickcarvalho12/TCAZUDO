"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Rifa_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Rifa"));
const Tipo_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Tipo"));
class RifasController {
    async register({ view }) {
        const tipos = await Tipo_1.default.all();
        return view.render('rifas/register', { tipos });
    }
    async show({ view }) {
        const rifas = await Rifa_1.default.all();
        return view.render('rifas/show', { rifas });
    }
    async list({ response, session }) {
        return response.redirect().toRoute('rifas.list', {});
        try {
        }
        catch (error) {
            console.log(error);
            session.flash('errors', 'Erro no registro. Verifique suas informações.');
        }
        response.redirect().toRoute('root');
    }
    async store({ request, response, auth }) {
        const rifa = request.only(['titulo', 'descricao', 'data_provavel_sorteio', 'data_inicio_venda', 'data_fim_venda', 'valor_bilhete', 'tipo_id']);
        await auth.user?.related('rifas').create(rifa);
        response.redirect().toRoute('premios.index', { rifa });
    }
}
exports.default = RifasController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmlmYXNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUmlmYXNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsaUZBQWtDO0FBQ2xDLGlGQUFrQztBQUVsQyxNQUFxQixlQUFlO0lBQzNCLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQXVCO1FBQ2pELE1BQU0sS0FBSyxHQUFHLE1BQU0sY0FBSSxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzlCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBQyxFQUFDLEtBQUssRUFBQyxDQUFDLENBQUE7SUFDOUMsQ0FBQztJQUVNLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQXNCO1FBQzVDLE1BQU0sS0FBSyxHQUFHLE1BQU0sY0FBSSxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBRTlCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsRUFBQyxLQUFLLEVBQUMsQ0FBQyxDQUFBO0lBQzNDLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBdUI7UUFDMUQsT0FBTyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUdwRCxJQUFJO1NBTUg7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkIsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsK0NBQStDLENBQUMsQ0FBQTtTQUd6RTtRQUNELFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDckMsQ0FBQztJQUNNLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBdUI7UUFDakUsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBQyxXQUFXLEVBQUMsdUJBQXVCLEVBQUMsbUJBQW1CLEVBQUMsZ0JBQWdCLEVBQUMsZUFBZSxFQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDekksTUFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7UUFFOUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUMsRUFBQyxJQUFJLEVBQUMsQ0FBQyxDQUFBO0lBQ3JELENBQUM7Q0FFRjtBQXRDRCxrQ0FzQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuaW1wb3J0IFJpZmEgZnJvbSAnQXBwL01vZGVscy9SaWZhJ1xuaW1wb3J0IFRpcG8gZnJvbSAnQXBwL01vZGVscy9UaXBvJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSaWZhc0NvbnRyb2xsZXIge1xuICBwdWJsaWMgYXN5bmMgcmVnaXN0ZXIoeyB2aWV3IH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICBjb25zdCB0aXBvcyA9IGF3YWl0IFRpcG8uYWxsKClcbiAgICByZXR1cm4gdmlldy5yZW5kZXIoJ3JpZmFzL3JlZ2lzdGVyJyx7dGlwb3N9KVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHNob3coeyB2aWV3fTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IHJpZmFzID0gYXdhaXQgUmlmYS5hbGwoKVxuICAgIC8vY29uc3QgcmlmYXMgPSBhd2FpdCBhdXRoLnVzZXI/LnJlbGF0ZWQoJ3JpZmFzJykucXVlcnkoKVxuICAgIHJldHVybiB2aWV3LnJlbmRlcigncmlmYXMvc2hvdycsIHtyaWZhc30pXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbGlzdCh7IHJlc3BvbnNlLCBzZXNzaW9uIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UucmVkaXJlY3QoKS50b1JvdXRlKCdyaWZhcy5saXN0Jywge30pXG4gICAgLy9jb25zdCBkYXRhID0gcmVxdWVzdC5vbmx5KFsnbm9tZScsJ2VtYWlsJywncGFzc3dvcmQnLCdmb3RvJywnYWRtaW4nXSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy9kYXRhLmFkbWluPWZhbHNlO1xuICAgICAgLy9kYXRhLmZvdG89IDE7XG4gICAgICAvL2NvbnN0IHVzZXIgPSBhd2FpdCBVc3VhcmlvLmNyZWF0ZShkYXRhKVxuICAgICAgLy9hd2FpdCBhdXRoLmxvZ2luKHVzZXIsdHJ1ZSlcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICBcbiAgICAgIHNlc3Npb24uZmxhc2goJ2Vycm9ycycsICdFcnJvIG5vIHJlZ2lzdHJvLiBWZXJpZmlxdWUgc3VhcyBpbmZvcm1hw6fDtWVzLicpXG4gICAgICAvL3JldHVybiByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ2F1dGgucmVnaXN0ZXInKVxuICAgICAgXG4gICAgfVxuICAgIHJlc3BvbnNlLnJlZGlyZWN0KCkudG9Sb3V0ZSgncm9vdCcpXG4gIH1cbiAgcHVibGljIGFzeW5jIHN0b3JlKHsgcmVxdWVzdCwgcmVzcG9uc2UsIGF1dGggfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IHJpZmEgPSByZXF1ZXN0Lm9ubHkoWyd0aXR1bG8nLCdkZXNjcmljYW8nLCdkYXRhX3Byb3ZhdmVsX3NvcnRlaW8nLCdkYXRhX2luaWNpb192ZW5kYScsJ2RhdGFfZmltX3ZlbmRhJywndmFsb3JfYmlsaGV0ZScsJ3RpcG9faWQnXSk7XG4gICAgYXdhaXQgYXV0aC51c2VyPy5yZWxhdGVkKCdyaWZhcycpLmNyZWF0ZShyaWZhKVxuICAgIC8vY29uc3QgcmlmYSA9IFJpZmEucXVlcnkoKS53aGVyZSgnaWQnLHBhcmFtcy5pZClcbiAgICByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ3ByZW1pb3MuaW5kZXgnLHtyaWZhfSlcbiAgfVxuXG59ICJdfQ==